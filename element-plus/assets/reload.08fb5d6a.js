import{v as K,w as x,B as J,_ as ie,P as I,a6 as Ee,a7 as Ce,Y as Te,a8 as Ne,H as we,X as oe,a9 as le,E as $e,F as Re}from"./base.606bbc79.js";import{u as de,f as Pe,h as Se,E as Be,a as De}from"./el-form-item.a518a67a.js";import{m as ce}from"./el-input.d25be13e.js";import{E as ke,a as Ae}from"./el-select.52daed4f.js";import{d as U,C as Q,G as H,r as N,w as D,p as ee,o as te,f as be,P as fe,j as B,X as Oe,as as j,m as ae,N as ne,A as M,n as me,S as Ve,e as t,M as ve,L as je,H as pe,q as ze,T as xe,at as Me,a4 as Ue,a5 as Le,Z as Ie,I as We,u as se,an as Ke,_ as He,c as qe,a as T,b as L}from"./index.8da1a921.js";import{a as W}from"./focus-trap.6451db8f.js";import{U as Fe}from"./event.63ee1cda.js";import{u as Xe}from"./index.b14b2675.js";const q=Symbol("tabsRootContextKey"),Ye=K({tabs:{type:x(Array),default:()=>ce([])}}),Ge={name:"ElTabBar"},Ze=U({...Ge,props:Ye,setup(e,{expose:a}){const R=e,_="ElTabBar",i=ae(),h=Q(q);h||J(_,"<el-tabs><el-tab-bar /></el-tabs>");const n=H("tabs"),r=N(),v=N(),b=()=>{let s=0,y=0;const o=["top","bottom"].includes(h.props.tabPosition)?"width":"height",f=o==="width"?"x":"y";return R.tabs.every(l=>{var u,F,P,k;const A=(F=(u=i.parent)==null?void 0:u.refs)==null?void 0:F[`tab-${l.uid}`];if(!A)return!1;if(!l.active)return!0;y=A[`client${j(o)}`];const z=f==="x"?"left":"top";s=A.getBoundingClientRect()[z]-((k=(P=A.parentElement)==null?void 0:P.getBoundingClientRect()[z])!=null?k:0);const O=window.getComputedStyle(A);return o==="width"&&(R.tabs.length>1&&(y-=Number.parseFloat(O.paddingLeft)+Number.parseFloat(O.paddingRight)),s+=Number.parseFloat(O.paddingLeft)),!1}),{[o]:`${y}px`,transform:`translate${j(f)}(${s}px)`}},m=()=>v.value=b();return D(()=>R.tabs,async()=>{await ee(),m()},{immediate:!0}),de(r,()=>m()),a({ref:r,update:m}),(s,y)=>(te(),be("div",{ref_key:"barRef",ref:r,class:fe([B(n).e("active-bar"),B(n).is(B(h).props.tabPosition)]),style:Oe(v.value)},null,6))}});var Je=ie(Ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const Qe=K({panes:{type:x(Array),default:()=>ce([])},currentName:{type:[String,Number],default:""},editable:Boolean,onTabClick:{type:x(Function),default:ne},onTabRemove:{type:x(Function),default:ne},type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),ue="ElTabNav",et=U({name:ue,props:Qe,setup(e,{expose:a}){const R=ae(),_=Q(q);_||J(ue,"<el-tabs><tab-nav /></el-tabs>");const i=H("tabs"),h=Pe(),n=Se(),r=N(),v=N(),b=N(),m=N(!1),s=N(0),y=N(!1),o=N(!0),f=M(()=>["top","bottom"].includes(_.props.tabPosition)?"width":"height"),l=M(()=>({transform:`translate${f.value==="width"?"X":"Y"}(-${s.value}px)`})),u=()=>{if(!r.value)return;const d=r.value[`offset${j(f.value)}`],p=s.value;if(!p)return;const c=p>d?p-d:0;s.value=c},F=()=>{if(!r.value||!v.value)return;const d=v.value[`offset${j(f.value)}`],p=r.value[`offset${j(f.value)}`],c=s.value;if(d-c<=p)return;const w=d-c>p*2?c+p:d-p;s.value=w},P=async()=>{const d=v.value;if(!m.value||!b.value||!r.value||!d)return;await ee();const p=b.value.querySelector(".is-active");if(!p)return;const c=r.value,w=["top","bottom"].includes(_.props.tabPosition),C=p.getBoundingClientRect(),E=c.getBoundingClientRect(),S=w?d.offsetWidth-E.width:d.offsetHeight-E.height,$=s.value;let g=$;w?(C.left<E.left&&(g=$-(E.left-C.left)),C.right>E.right&&(g=$+C.right-E.right)):(C.top<E.top&&(g=$-(E.top-C.top)),C.bottom>E.bottom&&(g=$+(C.bottom-E.bottom))),g=Math.max(g,0),s.value=Math.min(g,S)},k=()=>{if(!v.value||!r.value)return;const d=v.value[`offset${j(f.value)}`],p=r.value[`offset${j(f.value)}`],c=s.value;if(p<d){const w=s.value;m.value=m.value||{},m.value.prev=w,m.value.next=w+p<d,d-w<p&&(s.value=d-p)}else m.value=!1,c>0&&(s.value=0)},A=d=>{const p=d.code,{up:c,down:w,left:C,right:E}=W;if(![c,w,C,E].includes(p))return;const S=Array.from(d.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),$=S.indexOf(d.target);let g;p===C||p===c?$===0?g=S.length-1:g=$-1:$<S.length-1?g=$+1:g=0,S[g].focus(),S[g].click(),z()},z=()=>{o.value&&(y.value=!0)},O=()=>y.value=!1;return D(h,d=>{d==="hidden"?o.value=!1:d==="visible"&&setTimeout(()=>o.value=!0,50)}),D(n,d=>{d?setTimeout(()=>o.value=!0,50):o.value=!1}),de(b,k),me(()=>setTimeout(()=>P(),0)),Ve(()=>k()),a({scrollToActiveTab:P,removeFocus:O}),D(()=>e.panes,()=>R.update(),{flush:"post"}),()=>{const d=m.value?[t("span",{class:[i.e("nav-prev"),i.is("disabled",!m.value.prev)],onClick:u},[t(I,null,{default:()=>[t(Ee,null,null)]})]),t("span",{class:[i.e("nav-next"),i.is("disabled",!m.value.next)],onClick:F},[t(I,null,{default:()=>[t(Ce,null,null)]})])]:null,p=e.panes.map((c,w)=>{var C,E,S,$;const g=c.uid,X=c.props.disabled,Y=(E=(C=c.props.name)!=null?C:c.index)!=null?E:`${w}`,G=!X&&(c.isClosable||e.editable);c.index=`${w}`;const ge=G?t(I,{class:"is-icon-close",onClick:V=>e.onTabRemove(c,V)},{default:()=>[t(Te,null,null)]}):null,_e=(($=(S=c.slots).label)==null?void 0:$.call(S))||c.props.label,ye=!X&&c.active?0:-1;return t("div",{ref:`tab-${g}`,class:[i.e("item"),i.is(_.props.tabPosition),i.is("active",c.active),i.is("disabled",X),i.is("closable",G),i.is("focus",y.value)],id:`tab-${Y}`,key:`tab-${g}`,"aria-controls":`pane-${Y}`,role:"tab","aria-selected":c.active,tabindex:ye,onFocus:()=>z(),onBlur:()=>O(),onClick:V=>{O(),e.onTabClick(c,Y,V)},onKeydown:V=>{G&&(V.code===W.delete||V.code===W.backspace)&&e.onTabRemove(c,V)}},[_e,ge])});return t("div",{ref:b,class:[i.e("nav-wrap"),i.is("scrollable",!!m.value),i.is(_.props.tabPosition)]},[d,t("div",{class:i.e("nav-scroll"),ref:r},[t("div",{class:[i.e("nav"),i.is(_.props.tabPosition),i.is("stretch",e.stretch&&["top","bottom"].includes(_.props.tabPosition))],ref:v,style:l.value,role:"tablist",onKeydown:A},[e.type?null:t(Je,{tabs:[...e.panes]},null),p])])])}}}),tt=K({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:x(Function),default:()=>!0},stretch:Boolean}),Z=e=>ze(e)||we(e),at={[Fe]:e=>Z(e),"tab-click":(e,a)=>a instanceof Event,"tab-change":e=>Z(e),edit:(e,a)=>["remove","add"].includes(a),"tab-remove":e=>Z(e),"tab-add":()=>!0};var ot=U({name:"ElTabs",props:tt,emits:at,setup(e,{emit:a,slots:R,expose:_}){var i,h;const n=H("tabs"),r=N(),v=ve({}),b=N((h=(i=e.modelValue)!=null?i:e.activeName)!=null?h:"0"),m=l=>{b.value=l,a(Fe,l),a("tab-change",l)},s=async l=>{var u,F,P;if(!(b.value===l||oe(l)))try{await((u=e.beforeLeave)==null?void 0:u.call(e,l,b.value))!==!1&&(m(l),(P=(F=r.value)==null?void 0:F.removeFocus)==null||P.call(F))}catch{}},y=(l,u,F)=>{l.props.disabled||(s(u),a("tab-click",l,F))},o=(l,u)=>{l.props.disabled||oe(l.props.name)||(u.stopPropagation(),a("edit",l.props.name,"remove"),a("tab-remove",l.props.name))},f=()=>{a("edit",void 0,"add"),a("tab-add")};return Xe({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},M(()=>!!e.activeName)),D(()=>e.activeName,l=>s(l)),D(()=>e.modelValue,l=>s(l)),D(b,async()=>{var l;await ee(),(l=r.value)==null||l.scrollToActiveTab()}),je(q,{props:e,currentName:b,registerPane:F=>v[F.uid]=F,unregisterPane:F=>delete v[F]}),_({currentName:b}),()=>{const l=e.editable||e.addable?t("span",{class:n.e("new-tab"),tabindex:"0",onClick:f,onKeydown:P=>{P.code===W.enter&&f()}},[t(I,{class:n.is("icon-plus")},{default:()=>[t(Ne,null,null)]})]):null,u=t("div",{class:[n.e("header"),n.is(e.tabPosition)]},[l,t(et,{ref:r,currentName:b.value,editable:e.editable,type:e.type,panes:Object.values(v),stretch:e.stretch,onTabClick:y,onTabRemove:o},null)]),F=t("div",{class:n.e("content")},[pe(R,"default")]);return t("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:e.type==="card",[n.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[u,F]:[F,u]])}}});const lt=K({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),nt=["id","aria-hidden","aria-labelledby"],st={name:"ElTabPane"},ut=U({...st,props:lt,setup(e){const a=e,R="ElTabPane",_=ae(),i=xe(),h=Q(q);h||J(R,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=H("tab-pane"),r=N(),v=M(()=>a.closable||h.props.closable),b=le(()=>{var f;return h.currentName.value===((f=a.name)!=null?f:r.value)}),m=N(b.value),s=M(()=>{var f;return(f=a.name)!=null?f:r.value}),y=le(()=>!a.lazy||m.value||b.value);D(b,f=>{f&&(m.value=!0)});const o=ve({uid:_.uid,slots:i,props:a,paneName:s,active:b,index:r,isClosable:v});return me(()=>{h.registerPane(o)}),Me(()=>{h.unregisterPane(o.uid)}),(f,l)=>B(y)?Ue((te(),be("div",{key:0,id:`pane-${B(s)}`,class:fe(B(n).b()),role:"tabpanel","aria-hidden":!B(b),"aria-labelledby":`tab-${B(s)}`},[pe(f.$slots,"default")],10,nt)),[[Le,B(b)]]):Ie("v-if",!0)}});var he=ie(ut,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const rt=$e(ot,{TabPane:he}),it=Re(he);const re='[{"type":"paragraph","children":[{"text":"\u53EA\u8981\u8FDB\u884C\u4E86 "},{"text":"v-model:json/v-model:html","code":true},{"text":" \u7ED1\u5B9A\uFF0C\u4E14 "},{"text":"extendCache","code":true},{"text":" \u4E3A "},{"text":"true","code":true},{"text":"\uFF0C\u90A3\u4E48\u6570\u636E\u5C31\u4E0D\u4F1A\u4E22\u5931\uFF01\uFF01\uFF01"}]}]',dt=U({components:{IPage:We},setup(){const e=N("first"),{opts:a,handle:R}=se({editable:{defaultContent:re}}),{opts:_,handle:i}=se({editable:{defaultContent:re}}),h=Ke({json:[],jstr:""});function n(){const o=new Date;return`${o.toLocaleString()} ${o.getMilliseconds()}`}function r(o){console.log(`${o.type} - \u5373\u5C06\u91CD\u8F7D\uFF08${n()}\uFF09`,o)}function v(o){console.log(`${o.type} - \u91CD\u8F7D\u7ED3\u675F\uFF08${n()}\uFF09`,o)}function b(o){console.log(`\u83DC\u5355\u680F - \u5373\u5C06\u91CD\u8F7D\uFF08${n()}\uFF09`,o)}function m(o){console.log(`\u83DC\u5355\u680F - \u91CD\u8F7D\u7ED3\u675F\uFF08${n()}\uFF09`,o)}function s(o){console.log(`\u7F16\u8F91\u533A - \u5373\u5C06\u91CD\u8F7D\uFF08${n()}\uFF09`,o)}function y(o){console.log(`\u7F16\u8F91\u533A - \u91CD\u8F7D\u7ED3\u675F\uFF08${n()}\uFF09`,o)}return{tab:e,opts1:a,handle1:R,opts2:_,handle2:i,data:h,onReload:r,onReloaded:v,onToolbarReload:b,onToolbarReloaded:m,onEditableReload:s,onEditableReloaded:y}}});function ct(e,a,R,_,i,h){const n=ke,r=Ae,v=Be,b=De,m=L("we-editor"),s=it,y=L("we-toolbar"),o=L("we-editable"),f=rt,l=L("i-page");return te(),qe(l,{title:"\u91CD\u8F7D\u4E8B\u4EF6 reload \u548C reloaded"},{default:T(()=>[t(f,{modelValue:e.tab,"onUpdate:modelValue":a[6]||(a[6]=u=>e.tab=u)},{default:T(()=>[t(s,{label:"WeEditor",name:"first"},{default:T(()=>[t(b,{inline:!0},{default:T(()=>[t(v,{label:"editable mode\uFF1A"},{default:T(()=>[t(r,{modelValue:e.opts1.editable.mode,"onUpdate:modelValue":a[0]||(a[0]=u=>e.opts1.editable.mode=u),placeholder:"editable mode"},{default:T(()=>[t(n,{value:"default"}),t(n,{value:"simple"})]),_:1},8,["modelValue"])]),_:1}),t(v,{label:"toolbar mode\uFF1A"},{default:T(()=>[t(r,{modelValue:e.opts1.toolbar.mode,"onUpdate:modelValue":a[1]||(a[1]=u=>e.opts1.toolbar.mode=u),placeholder:"toolbar mode"},{default:T(()=>[t(n,{value:"default"}),t(n,{value:"simple"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(m,{handle:e.handle1,json:e.data.json,"onUpdate:json":a[2]||(a[2]=u=>e.data.json=u),onReload:e.onReload,onReloaded:e.onReloaded},null,8,["handle","json","onReload","onReloaded"])]),_:1}),t(s,{label:"WeToolbar/WeEditable",name:"second"},{default:T(()=>[t(b,{inline:!0},{default:T(()=>[t(v,{label:"editable mode\uFF1A"},{default:T(()=>[t(r,{modelValue:e.opts2.editable.mode,"onUpdate:modelValue":a[3]||(a[3]=u=>e.opts2.editable.mode=u),placeholder:"editable mode"},{default:T(()=>[t(n,{value:"default"}),t(n,{value:"simple"})]),_:1},8,["modelValue"])]),_:1}),t(v,{label:"toolbar mode\uFF1A"},{default:T(()=>[t(r,{modelValue:e.opts2.toolbar.mode,"onUpdate:modelValue":a[4]||(a[4]=u=>e.opts2.toolbar.mode=u),placeholder:"toolbar mode"},{default:T(()=>[t(n,{value:"default"}),t(n,{value:"simple"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(y,{handle:e.handle2,onReload:e.onToolbarReload,onReloaded:e.onToolbarReloaded},null,8,["handle","onReload","onReloaded"]),t(o,{handle:e.handle2,json:e.data.jstr,"onUpdate:json":a[5]||(a[5]=u=>e.data.jstr=u),jsonModifiers:{string:!0},onReload:e.onEditableReload,onReloaded:e.onEditableReloaded},null,8,["handle","json","onReload","onReloaded"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}const _t=He(dt,[["render",ct]]);export{_t as default};
