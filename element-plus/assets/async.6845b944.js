import{D as W,B as $e,l as ne,a0 as ee,a1 as Ie,a2 as Ae,a3 as Le,v as K,w as P,J as Me,P as ae,_ as Q,a4 as Be,y as Re,a5 as oe,E as re,Y as Ne}from"./base.ccfe5d22.js";import{E as Oe}from"./el-card.32abf1c8.js";import{E as ze}from"./el-button.9562dba6.js";import{Q as Ve,n as ie,h as Ye,R as He,ak as Ue,G as j,ap as _e,w as J,l as Xe,N as F,d as X,e as m,H as g,aq as qe,C as te,A as $,o as E,f as I,v as z,P as b,j as t,W as de,a as p,c as _,Y as Ge,Z as D,X as x,a6 as ue,U as se,r as k,B as We,ar as Ke,p as je,m as Fe,T as Pe,L as Je,a4 as ce,a5 as fe,J as Ze,aj as Qe,$ as me,ab as pe,b as O,I as xe,u as le,_ as eo,V as ve}from"./index.cb2d4fe5.js";import{g as oo,b as ye,F as to,u as so,E as be}from"./focus-trap.8d49d59d.js";import{U as Ce}from"./event.63ee1cda.js";import{u as Z}from"./index.6a2375d7.js";const lo=(...e)=>o=>{e.forEach(s=>{Ve(s)?s(o):s.value=o})};var G=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(G||{});const Ee=Symbol("dialogInjectionKey"),no=(e,o,s)=>{let r={offsetX:0,offsetY:0};const d=n=>{const u=n.clientX,v=n.clientY,{offsetX:f,offsetY:C}=r,l=e.value.getBoundingClientRect(),y=l.left,A=l.top,V=l.width,Y=l.height,H=document.documentElement.clientWidth,R=document.documentElement.clientHeight,U=-y+f,N=-A+C,L=H-y-V+f,M=R-A-Y+C,w=i=>{const h=Math.min(Math.max(f+i.clientX-u,U),L),S=Math.min(Math.max(C+i.clientY-v,N),M);r={offsetX:h,offsetY:S},e.value.style.transform=`translate(${W(h)}, ${W(S)})`},B=()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",B)};document.addEventListener("mousemove",w),document.addEventListener("mouseup",B)},c=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",d)},a=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",d)};ie(()=>{Ye(()=>{s.value?c():a()})}),He(()=>{a()})},ao=e=>{Ue(e)||$e("[useLockscreen]","You need to pass a ref param to this function");const o=j("popup"),s=_e(()=>o.bm("parent","hidden"));if(!ne||ee(document.body,s.value))return;let r=0,d=!1,c="0";const a=()=>{Le(document.body,s.value),d&&(document.body.style.width=c)};J(e,n=>{if(!n){a();return}d=!ee(document.body,s.value),d&&(c=document.body.style.width),r=oo(o.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,v=Ie(document.body,"overflowY");r>0&&(u||v==="scroll")&&d&&(document.body.style.width=`calc(100% - ${r}px)`),Ae(document.body,s.value)}),Xe(()=>a())},ge=e=>{if(!e)return{onClick:F,onMousedown:F,onMouseup:F};let o=!1,s=!1;return{onClick:a=>{o&&s&&e(a),o=s=!1},onMousedown:a=>{o=a.target===a.currentTarget},onMouseup:a=>{s=a.target===a.currentTarget}}},ro=K({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:P([String,Array,Object])},zIndex:{type:P([String,Number])}}),io={click:e=>e instanceof MouseEvent};var uo=X({name:"ElOverlay",props:ro,emits:io,setup(e,{slots:o,emit:s}){const r=j("overlay"),d=u=>{s("click",u)},{onClick:c,onMousedown:a,onMouseup:n}=ge(e.customMaskEvent?void 0:d);return()=>e.mask?m("div",{class:[r.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:a,onMouseup:n},[g(o,"default")],G.STYLE|G.CLASS|G.PROPS,["onClick","onMouseup","onMousedown"]):qe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[g(o,"default")])}});const we=uo,he=K({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Me},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),co={close:()=>!0},fo=["aria-label"],mo=["id"],po={name:"ElDialogContent"},vo=X({...po,props:he,emits:co,setup(e){const o=e,{t:s}=ye(),{Close:r}=Be,{dialogRef:d,headerRef:c,bodyId:a,ns:n,style:u}=te(Ee),{focusTrapRef:v}=te(to),f=lo(v,d),C=$(()=>o.draggable);return no(d,c,C),(l,y)=>(E(),I("div",{ref:t(f),class:b([t(n).b(),t(n).is("fullscreen",l.fullscreen),t(n).is("draggable",t(C)),t(n).is("align-center",l.alignCenter),{[t(n).m("center")]:l.center},l.customClass]),style:x(t(u)),tabindex:"-1",onClick:y[1]||(y[1]=ue(()=>{},["stop"]))},[z("header",{ref_key:"headerRef",ref:c,class:b(t(n).e("header"))},[g(l.$slots,"header",{},()=>[z("span",{role:"heading",class:b(t(n).e("title"))},de(l.title),3)]),l.showClose?(E(),I("button",{key:0,"aria-label":t(s)("el.dialog.close"),class:b(t(n).e("headerbtn")),type:"button",onClick:y[0]||(y[0]=A=>l.$emit("close"))},[m(t(ae),{class:b(t(n).e("close"))},{default:p(()=>[(E(),_(Ge(l.closeIcon||t(r))))]),_:1},8,["class"])],10,fo)):D("v-if",!0)],2),z("div",{id:t(a),class:b(t(n).e("body"))},[g(l.$slots,"default")],10,mo),l.$slots.footer?(E(),I("footer",{key:0,class:b(t(n).e("footer"))},[g(l.$slots,"footer")],2)):D("v-if",!0)],6))}});var yo=Q(vo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ke=K({...he,appendToBody:{type:Boolean,default:!1},beforeClose:{type:P(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Se={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Ce]:e=>Re(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Te=(e,o)=>{const r=Fe().emit,{nextZIndex:d}=so();let c="";const a=se(),n=se(),u=k(!1),v=k(!1),f=k(!1),C=k(e.zIndex||d());let l,y;const A=We("namespace",Ke),V=$(()=>{const T={},q=`--${A.value}-dialog`;return e.fullscreen||(e.top&&(T[`${q}-margin-top`]=e.top),e.width&&(T[`${q}-width`]=W(e.width))),T}),Y=$(()=>e.alignCenter?{display:"flex"}:{});function H(){r("opened")}function R(){r("closed"),r(Ce,!1),e.destroyOnClose&&(f.value=!1)}function U(){r("close")}function N(){y==null||y(),l==null||l(),e.openDelay&&e.openDelay>0?{stop:l}=oe(()=>B(),e.openDelay):B()}function L(){l==null||l(),y==null||y(),e.closeDelay&&e.closeDelay>0?{stop:y}=oe(()=>i(),e.closeDelay):i()}function M(){function T(q){q||(v.value=!0,u.value=!1)}e.beforeClose?e.beforeClose(T):L()}function w(){e.closeOnClickModal&&M()}function B(){!ne||(u.value=!0)}function i(){u.value=!1}function h(){r("openAutoFocus")}function S(){r("closeAutoFocus")}e.lockScroll&&ao(u);function De(){e.closeOnPressEscape&&M()}return J(()=>e.modelValue,T=>{T?(v.value=!1,N(),f.value=!0,C.value=e.zIndex?C.value++:d(),je(()=>{r("open"),o.value&&(o.value.scrollTop=0)})):u.value&&L()}),J(()=>e.fullscreen,T=>{!o.value||(T?(c=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=c)}),ie(()=>{e.modelValue&&(u.value=!0,f.value=!0,N())}),{afterEnter:H,afterLeave:R,beforeLeave:U,handleClose:M,onModalClick:w,close:L,doClose:i,onOpenAutoFocus:h,onCloseAutoFocus:S,onCloseRequested:De,titleId:a,bodyId:n,closed:v,style:V,overlayDialogStyle:Y,rendered:f,visible:u,zIndex:C}},bo=["aria-label","aria-labelledby","aria-describedby"],Co={name:"ElDialog",inheritAttrs:!1},Eo=X({...Co,props:ke,emits:Se,setup(e,{expose:o}){const s=e,r=Pe();Z({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},$(()=>!!r.title)),Z({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},$(()=>!!s.customClass));const d=j("dialog"),c=k(),a=k(),n=k(),{visible:u,titleId:v,bodyId:f,style:C,overlayDialogStyle:l,rendered:y,zIndex:A,afterEnter:V,afterLeave:Y,beforeLeave:H,handleClose:R,onModalClick:U,onOpenAutoFocus:N,onCloseAutoFocus:L,onCloseRequested:M}=Te(s,c);Je(Ee,{dialogRef:c,headerRef:a,bodyId:f,ns:d,rendered:y,style:C});const w=ge(U),B=$(()=>s.draggable&&!s.fullscreen);return o({visible:u,dialogContentRef:n}),(i,h)=>(E(),_(pe,{to:"body",disabled:!i.appendToBody},[m(me,{name:"dialog-fade",onAfterEnter:t(V),onAfterLeave:t(Y),onBeforeLeave:t(H),persisted:""},{default:p(()=>[ce(m(t(we),{"custom-mask-event":"",mask:i.modal,"overlay-class":i.modalClass,"z-index":t(A)},{default:p(()=>[z("div",{role:"dialog","aria-modal":"true","aria-label":i.title||void 0,"aria-labelledby":i.title?void 0:t(v),"aria-describedby":t(f),class:b(`${t(d).namespace.value}-overlay-dialog`),style:x(t(l)),onClick:h[0]||(h[0]=(...S)=>t(w).onClick&&t(w).onClick(...S)),onMousedown:h[1]||(h[1]=(...S)=>t(w).onMousedown&&t(w).onMousedown(...S)),onMouseup:h[2]||(h[2]=(...S)=>t(w).onMouseup&&t(w).onMouseup(...S))},[m(t(be),{loop:"",trapped:t(u),"focus-start-el":"container",onFocusAfterTrapped:t(N),onFocusAfterReleased:t(L),onReleaseRequested:t(M)},{default:p(()=>[t(y)?(E(),_(yo,Ze({key:0,ref_key:"dialogContentRef",ref:n},i.$attrs,{"custom-class":i.customClass,center:i.center,"align-center":i.alignCenter,"close-icon":i.closeIcon,draggable:t(B),fullscreen:i.fullscreen,"show-close":i.showClose,title:i.title,onClose:t(R)}),Qe({header:p(()=>[i.$slots.title?g(i.$slots,"title",{key:1}):g(i.$slots,"header",{key:0,close:t(R),titleId:t(v),titleClass:t(d).e("title")})]),default:p(()=>[g(i.$slots,"default")]),_:2},[i.$slots.footer?{name:"footer",fn:p(()=>[g(i.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):D("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],46,bo)]),_:3},8,["mask","overlay-class","z-index"]),[[fe,t(u)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var go=Q(Eo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const wo=re(go),ho=K({...ke,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0}}),ko=Se,So=X({name:"ElDrawer",components:{ElOverlay:we,ElFocusTrap:be,ElIcon:ae,Close:Ne},props:ho,emits:ko,setup(e,{slots:o}){Z({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},$(()=>!!o.title));const s=k(),r=k(),d=j("drawer"),{t:c}=ye(),a=$(()=>e.direction==="rtl"||e.direction==="ltr"),n=$(()=>W(e.size));return{...Te(e,s),drawerRef:s,focusStartRef:r,isHorizontal:a,drawerSize:n,ns:d,t:c}}}),To=["aria-label","aria-labelledby","aria-describedby"],Do=["id"],$o=["aria-label"],Io=["id"];function Ao(e,o,s,r,d,c){const a=O("close"),n=O("el-icon"),u=O("el-focus-trap"),v=O("el-overlay");return E(),_(pe,{to:"body",disabled:!e.appendToBody},[m(me,{name:e.ns.b("fade"),onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave,persisted:""},{default:p(()=>[ce(m(v,{mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex,onClick:e.onModalClick},{default:p(()=>[m(u,{loop:"",trapped:e.visible,"focus-trap-el":e.drawerRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:p(()=>[z("div",{ref:"drawerRef","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:e.titleId,"aria-describedby":e.bodyId,class:b([e.ns.b(),e.direction,e.visible&&"open",e.customClass]),style:x(e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize),role:"dialog",onClick:o[1]||(o[1]=ue(()=>{},["stop"]))},[z("span",{ref:"focusStartRef",class:b(e.ns.e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(E(),I("header",{key:0,class:b(e.ns.e("header"))},[e.$slots.title?g(e.$slots,"title",{key:1},()=>[D(" DEPRECATED SLOT ")]):g(e.$slots,"header",{key:0,close:e.handleClose,titleId:e.titleId,titleClass:e.ns.e("title")},()=>[e.$slots.title?D("v-if",!0):(E(),I("span",{key:0,id:e.titleId,role:"heading",class:b(e.ns.e("title"))},de(e.title),11,Do))]),e.showClose?(E(),I("button",{key:2,"aria-label":e.t("el.drawer.close"),class:b(e.ns.e("close-btn")),type:"button",onClick:o[0]||(o[0]=(...f)=>e.handleClose&&e.handleClose(...f))},[m(n,{class:b(e.ns.e("close"))},{default:p(()=>[m(a)]),_:1},8,["class"])],10,$o)):D("v-if",!0)],2)):D("v-if",!0),e.rendered?(E(),I("div",{key:1,id:e.bodyId,class:b(e.ns.e("body"))},[g(e.$slots,"default")],10,Io)):D("v-if",!0),e.$slots.footer?(E(),I("div",{key:2,class:b(e.ns.e("footer"))},[g(e.$slots,"footer")],2)):D("v-if",!0)],14,To)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[fe,e.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var Lo=Q(So,[["render",Ao],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const Mo=re(Lo);const Bo=X({components:{IPage:xe},setup(){const e=k(!1),{handle:o}=le({editable:{config:{placeholder:"In Dialog"}}}),s=k(!1),{handle:r}=le({editable:{config:{placeholder:"In Drawer"}}});return{dialogVisible:e,dialogHandle:o,drawerVisible:s,drawerHandle:r}}}),Ro=ve("open dialog"),No=ve("open drawer");function Oo(e,o,s,r,d,c){const a=ze,n=Oe,u=O("we-editor"),v=wo,f=Mo,C=O("i-page");return E(),_(C,{title:"\u5728\u5F39\u7A97\u4E2D\u4F7F\u7528"},{default:p(()=>[m(n,{shadow:"never"},{default:p(()=>[m(a,{type:"primary",onClick:o[0]||(o[0]=l=>e.dialogVisible=!0)},{default:p(()=>[Ro]),_:1}),m(a,{type:"primary",onClick:o[1]||(o[1]=l=>e.drawerVisible=!0)},{default:p(()=>[No]),_:1})]),_:1}),m(v,{modelValue:e.dialogVisible,"onUpdate:modelValue":o[2]||(o[2]=l=>e.dialogVisible=l),title:"In Dialog",width:"1000px","append-to-body":""},{default:p(()=>[m(u,{handle:e.dialogHandle},null,8,["handle"])]),_:1},8,["modelValue"]),m(f,{modelValue:e.drawerVisible,"onUpdate:modelValue":o[3]||(o[3]=l=>e.drawerVisible=l),title:"In Drawer",direction:"rtl",size:"75%","append-to-body":""},{default:p(()=>[m(u,{handle:e.drawerHandle},null,8,["handle"])]),_:1},8,["modelValue"])]),_:1})}const qo=eo(Bo,[["render",Oo]]);export{qo as default};
